# FlowScale VPS Environment Configuration
# Copy this file to .env and customize for your environment
# 
# Location: /var/www/flowscale/.env

# ============================================
# SERVER CONFIGURATION
# ============================================

# Port for the Node.js API server (nginx proxies to this)
PORT=3000

# Bind address (127.0.0.1 = local only, 0.0.0.0 = all interfaces)
HOST=127.0.0.1

# Node environment
NODE_ENV=production

# ============================================
# DIRECTORY PATHS
# ============================================

# Directory for uploaded video files
UPLOAD_DIR=/var/www/flowscale/uploads

# Directory for rendered video outputs
OUTPUT_DIR=/var/www/flowscale/outputs

# Directory for application logs
LOG_DIR=/var/www/flowscale/logs

# ============================================
# FILE LIMITS
# ============================================

# Maximum file upload size in bytes (default: 500MB)
MAX_FILE_SIZE=524288000

# Maximum render time in seconds (default: 10 minutes)
MAX_RENDER_TIME=600

# ============================================
# FFMPEG CONFIGURATION
# ============================================

# FFmpeg binary path (auto-detected if not set)
# FFMPEG_PATH=/usr/bin/ffmpeg

# FFprobe binary path (auto-detected if not set)
# FFPROBE_PATH=/usr/bin/ffprobe

# Default video codec
VIDEO_CODEC=libx264

# Default audio codec
AUDIO_CODEC=aac

# Default CRF quality (lower = higher quality, 18-28 typical)
CRF_QUALITY=23

# Default encoding preset (ultrafast, fast, medium, slow, veryslow)
ENCODE_PRESET=fast

# ============================================
# JOB QUEUE CONFIGURATION
# ============================================

# Maximum concurrent FFmpeg jobs (use 1 for single VPS)
MAX_CONCURRENT_JOBS=1

# Job cleanup - keep last N completed jobs in memory
MAX_STORED_JOBS=100

# Job timeout in seconds
JOB_TIMEOUT=600

# ============================================
# SECURITY
# ============================================

# Allowed file MIME types (comma-separated)
ALLOWED_MIME_TYPES=video/mp4,video/webm,video/quicktime,video/x-msvideo,video/x-matroska,image/jpeg,image/png,image/webp

# Allowed origin for CORS (set to your domain in production)
# CORS_ORIGIN=https://flowscale.cloud

# API rate limit (requests per minute per IP)
# RATE_LIMIT=60

# ============================================
# OPTIONAL: EXTERNAL SERVICES
# ============================================

# Supabase URL (if using Supabase for storage/auth)
# SUPABASE_URL=

# Supabase service role key
# SUPABASE_SERVICE_ROLE_KEY=

# ============================================
# PHASE 2: REDIS/BULLMQ (Future)
# ============================================

# Uncomment when migrating to Redis queue
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=
# QUEUE_NAME=flowscale-render

# ============================================
# MONITORING (Future)
# ============================================

# Sentry DSN for error tracking
# SENTRY_DSN=

# Prometheus metrics port
# METRICS_PORT=9090
